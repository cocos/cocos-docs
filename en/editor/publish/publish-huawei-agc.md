# Publish to HUAWEI AppGallery Connect

Cocos Creator supports publishing games to HUAWEI AppGallery Connect, which helps developers access to HUAWEI AppGallery.

## Preparation

- Login to the [AppGallery Connect](https://developer.huawei.com/consumer/en/service/josp/agc/index.html), it is necessary to complete the [Developer Registration](https://developer.huawei.com/consumer/en/doc/start/10104) before [creating an app](https://developer.huawei.com/consumer/en/doc/distribution/app/agc-create_app). When creating an app, select **APK** for the **Package type**.

  ![](./publish-huawei-agc/app-info.png)

- Access the required HUAWEI AppGallery Connect related services via the Cocos Service panel. Currently the SDK only supports the Android platform, please refer to the [HUAWEI HMS Core](https://service.cocos.com/document/en/sdkhub-plugins/sdkhub-hms.html) documentation for the detailed operation steps.

## Publishing Process

Use Cocos Creator to open the project that needs to be published. Open the **Build** panel from the **Menu bar -> Project**, select **HUAWEI AppGallery Connect** in the **Platform** dropdown of the **Build** panel.

![agc-build](./publish-huawei-agc/agc-builder.png)

For the settings of the general options, please refer to the [Build Options](build-options.md) documentation.

- **agconnect-services Config**: used to configure Huawei parameter file `agconnect-services.json`. Please refer to the [Configs HUAWEI Parameter File](https://service.cocos.com/document/en/sdkhub-plugins/sdkhub-hms.html#configs-huawei-config-file) for the specific configuration method.

- **Cocos SDKHub Config Set**: this option is used to help the game quickly integrate the channel SDK. Please select the SDKHub service that you have previously enabled in the Cocos Services panel.

  ![sdkhub](./publish-huawei-agc/sdkhub.png)

### Build and Compile

After the relevant options of the **Build** panel are set, click **Build**.<br>
After the build is complete, click the folder icon button in the bottom left corner of the **Build Task** to open the release package directory. You can see that the `huawei-agc` folder is generated under the default release path `build` directory, which has been automatically integrated with HUAWEI AppGallery Connect related services.

Then click **Make**, or use [Android Studio](native-options.md#make-and-run) to open the project to compile. After compiling, HUAWEI AppGallery Connect APK will be generated in the release package directory.

![apk](./publish-huawei-agc/apk.png)

### Upload the APK to AppGallery Connect

There are two ways to upload the APK to AppGallery Connect.

#### 1. Upload by the Build panel

Creator supports uploading the APK generated by building and compiling directly to the AppGallery Connect backend. <br>
Click the **Upload** button in the bottom right of the **Build Task** panel to open the **Upload** panel, then fill in the relevant information.

![agc-upload-panel](./publish-huawei-agc/agc-upload-panel.png)

- APP ID: fill in the APP ID for your app. Login to the AppGallery Connect and click **My apps -> App information** to get the APP ID.

- Version: Fill in as required.

- APK Path: Select the APK generated after compilation.

- Login Type: Includes both **OAuth** and **API Client**.

    - **OAuth**

        The OAuth login type only requires you follow the prompts to login to your HUAWEI account (Need to have sufficient [permissions](https://developer.huawei.com/consumer/en/doc/development/AppGallery-connect-Guides/agcapi-getstarted-0000001111845114#section797720532313)) when you click **Confirm**, then check the box of the required permissions, the window will automatically close and the APK will be uploaded automatically.

        ![upload-oauth](./publish-huawei-agc/upload-oauth.png)

    - **API Client**

        - If the API Client login type is used for the first time, you need to login to AppGallery Connect to get the relevant configuration information.

          ![upload-api](./publish-huawei-agc/upload-api.png)

        - Select **Users and permission -> Connect API -> Create** to create an API client, and select [Roles and Permissions](https://developer.huawei.com/consumer/en/doc/distribution/app/agc-help-rolepermission-0000001155345429) as needed, then click **Confirm**.

          ![create-api-key](./publish-huawei-agc/create-api-key.png)

        - Fill the **Client ID** and **Key** of the API client into the corresponding input boxs in the **Upload** panel of the Creator.

        - Click **Confirm** when you are done configuring.

    Detailed descriptions of the two login types can be found in the [AppGallery Connect API Getting Started](https://developer.huawei.com/consumer/en/doc/development/AppGallery-connect-Guides/agcapi-getstarted) documentation.

#### 2. Upload by AppGallery Connect

Sign in to AppGallery Connect, click **My apps** and select the app. Then switch to the **Distribute** column at the top left, click on **Version information -> Draft** in the left column, find the **Upload APK package**, click on **Software packages**, and then click on **Upload**.

### Submit Your App for Review

1. Sign in to AppGallery Connect, click **My apps** and select the app. Then switch to the **Distribute** column at the top left, click on **Version information -> Draft** in the left column, find the **Upload APK package**, click on **Software packages**, and then click on **Select**.

    ![apk-list](./publish-huawei-agc/apk-list.png)

2. For other configuration information, please refer to the [Releasing an App](https://developer.huawei.com/consumer/en/doc/distribution/app/agc-release_app) documentation. After completing and confirming all of the information is in order, click the **Submit** button at the top right of the page. HUAWEI AppGallery will complete the review in 3~5 working days.

## Related Reference Links

- [AppGallery Connect](https://developer.huawei.com/consumer/en/service/josp/agc/index.html)
- [AppGallery Connect Operation Guide](https://developer.huawei.com/consumer/en/doc/distribution/app/agc-create_app)
