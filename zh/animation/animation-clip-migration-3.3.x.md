# v3.3 动画剪辑数据升级指南

## 简述

在 V3.3 中，Creator 大幅度重构了它的动画剪辑类——摒弃了从前难以操纵、难以理解的接口，并引入了轨道、通道等概念，使动画分量编辑变得容易；最重要的，动画剪辑与其他引擎模块使用了公共的曲线对象，而非自立门户定义自己的曲线类型。

## 资源升级

现有资源通过 V3.3 及后续版本打开后会自动升级至新的数据类型，动画效果不变。

但有一些边缘情况需要注意：

### 渐变方式

旧数据中若使用了非线性且非常量的渐变方式时，运行时仍会生效，但在动画编辑器中不能再编辑。取而代之的，应当在曲线编辑器中重新编辑。

### 曲线类型

旧曲线中，所有以下类型的曲线都将被正确转换为对应的轨道：`number`、`Vec2`、`Vec3`、`Vec4`、`Quat`、`Color`、`Size`。其余类型的曲线将被转换为对象轨道。

## API 更改

历史动画剪辑对象的以下字段被废弃：

- `times`

- `curves`

- `commonTargets`

考虑到现有的使用，我们保留了这些 API 的效果。程序化地设置这些字段后，**动画运行之前** 会正确地转换为新格式。
