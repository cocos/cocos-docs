# v3.3 动画剪辑数据升级指南

在 v3.3 中，Creator 大幅度重构了动画剪辑类，摒弃了之前难以操纵、难以理解的接口，引入了轨道、通道等概念，使动画分量编辑变得更容易。更主要的是动画剪辑统一与其他引擎模块使用公共的曲线对象，而非自立门户定义自己的曲线类型。

## 资源升级

v3.3 之前的动画剪辑资源使用 v3.3 及后续版本打开后会自动升级至新的数据类型，动画效果不变。

但有以下几种边缘情况需要注意：

- 渐变方式

  旧版本的动画剪辑数据中若使用了非线性且非常量的渐变方式时，运行时仍会生效，但在 **动画编辑器** 中无法再编辑，需要手动在曲线编辑器中重新编辑。

- 动画曲线类型

  旧版本的动画曲线都将被转换为相对应的动画属性轨道，包括以下几种曲线类型：

    - `number`
    - `Vec2`、`Vec3`、`Vec4`
    - `Quat`
    - `Color`
    - `Size`

  其余类型的曲线将被转换为对象轨道。详情请参考 [动画属性轨道](use-animation-curve.md)。

- 通过模型文件导入的动画数据将不能再通过代码访问

## API 更改

旧版动画剪辑对象的以下字段被废弃：

- `times`

- `curves`

- `commonTargets`

考虑到兼容旧版的使用，我们保留了这些 API 的效果。程序化地设置这些字段后，在 **动画运行之前** 都会被正确地转换为新格式。
